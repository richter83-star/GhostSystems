import axios from 'axios'; const base='https://graph.facebook.com/v20.0'; const token=process.env.META_ACCESS_TOKEN||''; const acct=process.env.META_AD_ACCOUNT_ID||''; export async function seedAudience(emails:string[], name='Ghost Buyers'){ if(!token||!acct){ console.log('[dry-run][meta]',name,emails.length); return; } const res=await axios.post(`${base}/act_${acct}/customaudiences`,{name, subtype:'CUSTOM', description:'Ghost auto-seed'},{params:{access_token:token}}); const id=res.data.id; if(!id){ console.log('[warn] no audience id'); return;} await axios.post(`${base}/${id}/users`,{payload:{schema:'EMAIL', data:emails}},{params:{access_token:token}}); console.log('[ok] Meta seed created:',id); return id; }
