import { TwitterApi } from 'twitter-api-v2'; const client=(process.env.X_APP_KEY&&process.env.X_APP_SECRET&&process.env.X_ACCESS_TOKEN&&process.env.X_ACCESS_SECRET)? new TwitterApi({appKey:process.env.X_APP_KEY!,appSecret:process.env.X_APP_SECRET!,accessToken:process.env.X_ACCESS_TOKEN!,accessSecret:process.env.X_ACCESS_SECRET!,}):null; export async function postToX(status:string){ if(!client){ console.log('[dry-run][x]',status.slice(0,240)); return {id:`dry_${Date.now()}`}; } const r=await client.v2.tweet(status); return r; }
