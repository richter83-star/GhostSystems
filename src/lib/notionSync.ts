import axios from 'axios'; const token=process.env.NOTION_TOKEN||''; const dbid=process.env.NOTION_DB_ID||''; export async function notionLog(row:any){ if(!token||!dbid){ console.log('[dry-run][notion]',row); return;} const headers={Authorization:`Bearer ${token}`,'Content-Type':'application/json','Notion-Version':'2022-06-28'}; await axios.post(`https://api.notion.com/v1/pages`,{ parent:{database_id:dbid}, properties:{ Date:{date:{start:new Date().toISOString()}}, SKU:{title:[{text:{content:row.sku}}]}, Title:{rich_text:[{text:{content:row.title}}]}, Platform:{select:{name:row.platform}}, Price:{number:row.price_cents/100}, Sales:{number:row.sales}, Revenue:{number:row.revenue}, ConversionRate:{number:row.cr} } },{headers}); console.log('[ok] synced to Notion:',row.title); }
