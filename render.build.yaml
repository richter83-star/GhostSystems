# Render Build Optimizer
# Purpose: Reduce build time, cache heavy dependencies, and stabilize Puppeteer installs

env: node
build:
  # Use cached node_modules between builds
  cacheDirectories:
    - node_modules

  # Run faster, deterministic installs
  buildCommand: |
    echo "⚙️  Optimized build starting..."
    npm ci --omit=dev || npm install --omit=dev
    npm rebuild sqlite3 --build-from-source
    echo "✅ Build complete."

start:
  # Normal start command
  command: npm start
